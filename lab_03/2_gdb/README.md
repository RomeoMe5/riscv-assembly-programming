# Глава 3: Утилита GNU Debugger

## Структура

```bash
- doc/              -- теоретические материалы, условие практического задания, ответы на задания и вопросы
- task/             -- материалы практического задания
    - Makefile      -- правила для автоматизации сборки с помощью GNU Make
    - src/          -- исходный код задания
- solution/         -- решение практического задания
```

## Запуск кода

### QEMU

В решении `solution/` подготовлены правила сборки в файлах `Makefile*`.
Для ознакомления с доступными целями выполните `make help`.<br>
Основные правила:

- `make qemu` -- простая сборка с системным компилятором
(необходимо запускать на RISC-V Ubuntu 22.04),
- `make mik32` -- сборка кросс-компилятором под микроконтроллер MIK32 Амур.

### MIK32 Амур

Для компиляции необходимо использовать пакет кросс-компилятора
[`riscv-none-elf-gcc-xpack`](https://xpack-dev-tools.github.io/riscv-none-elf-gcc-xpack/),
установка которого учитывается в правилах сборки `Makefile`
(цель `install-toolchain` в `Makefile.deps`).<br>
Кроме того, для прошивки микроконтроллера потребуется пакет openOCD
[`openocd-xpack`](https://xpack-dev-tools.github.io/openocd-xpack/),
установить который можно с помощью правил сборки проекта
(цель `install-openocd` в `Makefile.deps`).

Для запуска отладки программ на микроконтроллере подготовлены правила `start-server`
и `stop-server`:

- `make start-server` запускает `openocd`-сервер и `gdb`-сервер
и позволяет управлять процессом исполнения программы на микроконтроллере,
- `make stop-server` находит и завершает процесс сервера `openocd`.
